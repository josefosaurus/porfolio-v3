---
import { Image } from "astro:assets"

interface Props {
  image: ImageMetadata
  link: string
  title: string
  institution: string
  year: string
  theme?: 'platzi' | 'default'
}

const { image, link, title, institution, year, theme = 'default' } = Astro.props

// Theme styles
const themes = {
  platzi: {
    bg: 'bg-[#96C93E]',
    titleColor: 'text-white',
    textColor: 'text-white',
  },
  default: {
    bg: 'bg-white dark:bg-gray-100',
    titleColor: 'text-red-600 dark:text-red-500',
    textColor: 'text-gray-900 dark:text-gray-800',
  },
}

const currentTheme = themes[theme]
---

<section
  id="education"
  class={`education ${currentTheme.bg} relative flex flex-col rounded-xl col-span-2 md:col-span-2 row-span-1 overflow-clip p-4 shadow-md hover:shadow-xl hover:scale-105 transition-all`}
>
  <h3 class="text-[10px] md:text-xs text-gray-600 dark:text-gray-500 uppercase tracking-wider font-medium mb-2 opacity-60">Latest Certification</h3>
  <a
    id="canvas"
    href={link}
    target="_blank"
    class="flex items-center gap-3 md:gap-4 w-[100%] flex-1"
  >
    <Image
      src={image}
      alt={title}
      class="h-[50px] md:h-[8rem] w-[50px] md:w-[8rem] flex-shrink-0"
    />
    <div class="flex-1">
      <h2
        class={`text-xs md:text-xl max-w-[unset] md:max-w-[unset] font-bold ${currentTheme.titleColor} text-ellipsis`}
      >
        {title}
      </h2>
      <p class={currentTheme.textColor}>{institution} - {year}</p>
    </div>
  </a>
</section>

<script>
  import JSConfetti from "js-confetti"
  const jsConfetti = new JSConfetti()
  const confetiTrigger = () => {
    jsConfetti.addConfetti()
  }
  const trigger = document.getElementById("education")

  trigger?.addEventListener("mouseenter", () => confetiTrigger())
</script>
